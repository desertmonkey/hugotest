<!DOCTYPE html>
<html>
  <head>
    <title>Cumulus Networks Documentation</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.34" />
<title>Quick Start Guide :: Cumulus Networks Documentation</title>
<link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/theme-flex/style.css" rel="stylesheet">

<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "http:\/\/docs.cumulusnetworks.com\/";
</script>
<meta name="description" content="">



    
  </head>
  <body data-url="/cumulus-linux/quick-start-guide/">
    
      <header>
  <div class="logo">
    
	
  
    <p><img src="https://cumulusnetworks.com/static/images/shared/cumulus-networks-logo-white.svg" alt="Cumulus Networks logo" /></p>

  

  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
    <nav class="shortcuts">
            <li class="" role="">
                <a href="https://cumulusnetworks.com/downloads/"  rel="noopener">
                  Downloads
                </a>
            </li>
            <li class="" role="">
                <a href="https://forums.cumulusnetworks.com/"  rel="noopener">
                  Forums
                </a>
            </li>
            <li class="" role="">
                <a href="https://support.cumulusnetworks.com/hc/en-us"  rel="noopener">
                  Knowledge Base & Support
                </a>
            </li>
            <li class="" role="">
                <a href="https://cumulusnetworks.com/"  rel="noopener">
                  CumulusNetworks.com
                </a>
            </li>
    </nav>
</header>
<article>
  <aside>
    <ul class="menu">
          <li data-nav-id="/" class="dd-item">
          <a href="/">
            <i class="fa fa-fw fa-home"></i>
          </a>
          </li>
    <li data-nav-id="/cumulus-linux/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/cumulus-linux/">Cumulus Linux</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </div>
        <ul>
    <li data-nav-id="/cumulus-linux/quick-start-guide/" class="dd-item parent active
        ">
      <div>
      <a href="/cumulus-linux/quick-start-guide/">Quick Start Guide</a>
      </div>
    </li>
    <li data-nav-id="/cumulus-linux/system-configuration/" class="dd-item haschildren
        ">
      <div>
      <a href="/cumulus-linux/system-configuration/">System Configuration</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/cumulus-linux/system-configuration/nclu/" class="dd-item">
        <div>
          <a href="/cumulus-linux/system-configuration/nclu/">
            NCLU Network Command Line Utility
          </a>
        </div>
    </li>
      <li data-nav-id="/cumulus-linux/system-configuration/switchd/" class="dd-item">
        <div>
          <a href="/cumulus-linux/system-configuration/switchd/">
            switchd
          </a>
        </div>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/netq/" class="dd-item
        ">
      <div>
      <a href="/netq/">NetQ</a>
      </div>
    </li>




    </ul>
    <section>
    </section>
  </aside>
  <section class="page">
    
    <div class="nav-select">
      <center>Navigation : 
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/cumulus-linux/" >
   Cumulus Linux</option> 
    <option value="/cumulus-linux/quick-start-guide/"  selected>
  - 
   Quick Start Guide</option> 
  
    <option value="/cumulus-linux/system-configuration/" >
  - 
   System Configuration</option>
  
    <option value="/netq/" >
   NetQ</option>



        </select>
      </center>
    </div>
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="Search...">
        </div>
        <script type="text/javascript" src="/js/lunr.min.js"></script>
        <script type="text/javascript" src="/js/auto-complete.js"></script>
        <link href="/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "http:\/\/docs.cumulusnetworks.com\/";
          
        </script>
        <script type="text/javascript" src="/js/search.js"></script>
      </div>
    

    <h1>Quick Start Guide</h1>
    
    
    



<p>This quick start guide provides an end-to-end setup process for installing and running Cumulus Linux, as well as a collection of example commands for getting started after installation is complete.</p>

<h2 id="prerequisites">Prerequisites</h2>

<ul>
<li>Intermediate-level Linux knowledge is assumed for this guide. You should be familiar with basic text editing, Unix file permissions, and process monitoring. A variety of text editors are pre-installed, including <code>vi</code> and <code>nano</code>.</li>
<li>You must have access to a Linux or UNIX shell. If you are running Windows, use a Linux environment like <a href="http://www.cygwin.com/">Cygwin</a> as your command line tool for interacting with Cumulus Linux.</li>
</ul>

<div class="notices tip" ><p>If you are a networking engineer but are unfamiliar with Linux concepts, refer to <a href="https://support.cumulusnetworks.com/hc/en-us/articles/201787636">this reference guide</a> to compare the Cumulus Linux CLI and configuration options, and their equivalent Cisco Nexus 3000 NX-OS commands and settings. You can also <a href="http://cumulusnetworks.com/technical-videos/">watch a series of short videos</a> introducing you to Linux and Cumulus Linux-specific concepts.</p>
</div>


<h2 id="installation">Installation</h2>

<p>To install Cumulus Linux, you use <a href="https://github.com/opencomputeproject/onie/wiki">ONIE</a> (Open  Network Install Environment), an extension to the traditional U-Boot software that allows for automatic discovery of a network installer image. This facilitates the ecosystem model of procuring switches, with a user&rsquo;s own choice of operating system loaded, such as Cumulus Linux.</p>

<div class="notices note" ><p>If Cumulus Linux 3.0.0 or later is already installed on your switch and you need to upgrade the software only, you can skip to <a href="#upgrade">Upgrading Cumulus Linux</a> below.</p>
</div>


<p>The easiest way to install Cumulus Linux with ONIE is with local HTTP discovery:</p>

<ol>
<li>If your host (like a laptop or server) is IPv6-enabled, make sure it is running a web server. If the host is IPv4-enabled, make sure it is running DHCP as well as a web server.</li>
<li><a href="http://cumulusnetworks.com/downloads/">Download</a> the Cumulus Linux installation file to the root directory of the web server. Rename this file <code>onie-installer</code>.</li>
<li>Connect your host using an Ethernet cable to the management Ethernet port of the switch.</li>
<li>Power on the switch. The switch downloads the ONIE image installer and boots. You can watch the progress of the install in your terminal. After the installation completes, the Cumulus Linux login prompt appears in the terminal window.</li>
</ol>

<div class="notices note" ><p>These steps describe a flexible unattended installation method. You do not need a console cable. A fresh install with ONIE using a local web server typically completes in less than ten minutes.</p>

<p>You have more options for installing Cumulus Linux with ONIE. Read <a href="https://docs.cumulusnetworks.com/display/DOCS/Installing+a+New+Cumulus+Linux+Image">Installing a New Cumulus Linux Image</a> to install Cumulus Linux using ONIE in the following ways:</p>

<ul>
<li>DHCP/web server with and without DHCP options</li>
<li>Web server without DHCP</li>
<li>FTP or TFTP without a web server</li>
<li>Local file</li>
<li>USB</li>
</ul>
</div>


<p>ONIE supports many other discovery mechanisms using USB (copy the installer to the root of the drive), DHCPv6 and DHCPv4, and image copy methods including HTTP, FTP, and TFTP. For more information on these discovery methods, refer to the <a href="https://github.com/opencomputeproject/onie/wiki/Design-Spec-SW-Image-Discovery">ONIE documentation</a>.</p>

<p>After installing Cumulus Linux, you are ready to:</p>

<ul>
<li>Log in to Cumulus Linux on the switch.</li>
<li>Install the Cumulus Linux license.</li>
<li>Configure Cumulus Linux. This quick start guide provides instructions on configuring switch ports and a loopback interface.</li>
</ul>

<h3 id="upgrade-to-the-latest-version">Upgrade to the Latest Version</h3>

<p>If you are running a Cumulus Linux version earlier than 3.0.0, you must perform a complete install, as <a href="https://docs.cumulusnetworks.com/display/DOCS/Quick+Start+Guide#QuickStartGuide-install">described above</a>. If you already have Cumulus Linux 3.0.0 or later installed on your switch, read <a href="https://docs.cumulusnetworks.com/display/DOCS/Managing+Cumulus+Linux+Disk+Images#ManagingCumulusLinuxDiskImages-upgrade">Upgrading Cumulus Linux</a> for considerations before starting the process.</p>

<h2 id="getting-started">Getting Started</h2>

<p>When starting Cumulus Linux for the first time, the management port makes a DHCPv4 request. To determine the IP address of the switch, you can cross reference the MAC address of the switch with your DHCP server. The MAC address is typically located on the side of the switch or on the box in which the unit ships.</p>

<h3 id="login-credentials">Login Credentials</h3>

<p>The default installation includes one system account, <em>root</em>, with full system privileges, and one user account, <em>cumulus</em>, with <code>sudo</code> privileges. The <em>root</em> account password is set to null by default (which prohibits login), while the <em>cumulus</em> account is configured with this default password:</p>

<pre><code>CumulusLinux!
</code></pre>

<p>In this quick start guide, you use the <em>cumulus</em> account to configure Cumulus Linux.</p>

<div class="notices warning" ><p>For optimum security, change the default password (using the <code>passwd</code> command) before you configure Cumulus Linux on the switch.</p>
</div>


<p>All accounts except <code>root</code> are permitted remote SSH login; you can use <code>sudo</code> to grant a non-root account root-level access. Commands that change the system configuration require this elevated level of access.</p>

<p>For more information about <code>sudo</code>, read <a href="https://docs.cumulusnetworks.com/display/DOCS/Using+sudo+to+Delegate+Privileges">Using sudo to Delegate Privileges</a>.</p>

<h3 id="serial-console-management">Serial Console Management</h3>

<p>You are encouraged to perform management and configuration over the network, <a href="https://docs.cumulusnetworks.com/display/DOCS/Upgrading+Cumulus+Linux#UpgradingCumulusLinux-outofband">either in band or out of band</a>. Use of the serial console is fully supported; however, many customers prefer the convenience of network-based management.</p>

<p>Typically, switches ship from the manufacturer with a mating DB9 serial cable. Switches with ONIE are always set to a 115200 baud rate.</p>

<h3 id="wired-ethernet-management">Wired Ethernet Management</h3>

<p>Switches supported in Cumulus Linux always contain at least one dedicated Ethernet management port, which is named eth0. This interface is geared specifically for out-of-band management use. The management interface uses DHCPv4 for addressing by default. You can set a static IP address with the <a href="../system-configuration/network-command-line-utility-nclu">Network Command Line Utility (NCLU)</a>.</p>

<h4 id="example-ip-configuration">Example IP Configuration</h4>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fa fa-chevron-down' : 'fa fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fa fa-chevron-right"></i>
        <span>
        
        
        NCLU Commands
        
        </span>
    </div>
    <div class="expand-content" style="display: none;">
<p>Set the static IP address with the <code>interface address</code> and <code>interface gateway</code> NCLU commands:</p>

<pre><code>cumulus@switch:~$ net add interface eth0 ip address 192.0.2.42/24
cumulus@switch:~$ net add interface eth0 ip gateway 192.0.2.1
cumulus@switch:~$ net pending
cumulus@switch:~$ net commit
</code></pre>

<p>These commands produce the following snippet in the <a href="http://manpages.debian.net/man/5/interfaces">/etc/network/interfaces</a> file:</p>

<pre><code>auto eth0
iface eth0
    address 192.0.2.42/24
    gateway 192.0.2.1
</code></pre>

    </div>
</div>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fa fa-chevron-down' : 'fa fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fa fa-chevron-right"></i>
        <span>
        
        
        Linux Commands
        
        </span>
    </div>
    <div class="expand-content" style="display: none;">
<p>Edit the <a href="http://manpages.debian.net/man/5/interfaces">/etc/network/interfaces</a> file and add the following configuration:</p>

<pre><code>cumulus@switch:~$ sudo nano /etc/network/interfaces

auto eth0
iface eth0
    address 192.0.2.42/24
    gateway 192.0.2.1
</code></pre>

    </div>
</div>

<h3 id="configuring-the-hostname-and-timezone">Configuring the Hostname and Timezone</h3>

<p>To change the hostname, run <code>net add hostname</code>, which modifies both the<code>/etc/hostname</code>and <code>/etc/hosts</code> files with the desired hostname.</p>

<pre><code>cumulus@switch:~$ net add hostname &lt;hostname&gt;
cumulus@switch:~$ net pending
cumulus@switch:~$ net commit
</code></pre>

<div class="notices note" ><p>The command prompt in the terminal does not reflect the new hostname until you either log out of the switch or start a new shell.</p>

<p>When you use this NCLU command to set the hostname, DHCP <strong>does not</strong> override the hostname when you reboot the switch. However, if you disable the hostname setting with NCLU, DHCP <strong>does</strong> override the hostname the next time you reboot the switch.</p>
</div>


<p>To update the timezone, use the NTP interactive mode:</p>

<ol>
<li>Run the following command in a terminal:
<code>sudo dpkg-reconfigure tzdata</code></li>
<li>Follow the on screen menu options to select the geographic area and region.</li>
</ol>

<div class="notices note" ><p>Programs that are already running (including log files) and users currently logged in, do not see timezone changes made with interactive mode. To have the timezone set for all services and daemons, a reboot is required.</p>
</div>


<h3 id="verifying-the-system-time">Verifying the System Time</h3>

<p>Before you install the license, verify that the date and time on the switch are correct. You must <a href="https://docs.cumulusnetworks.com/display/DOCS/Setting+Date+and+Time">correct the date and time</a> if they are incorrect. The wrong date and time can have impacts on the switch, such as the inability to synchronize with Puppet or return errors like this one after you restart <code>switchd</code>:</p>

<blockquote>
<p>Warning: Unit file of switchd.service changed on disk, &lsquo;systemctl daemon-reload&rsquo; recommended.</p>
</blockquote>

<h3 id="installing-the-license">Installing the License</h3>

<p>Cumulus Linux is licensed on a per-instance basis. Each network system is fully operational, enabling any capability to be utilized on the switch with the exception of forwarding on switch panel ports. Only eth0 and console ports are activated on an unlicensed instance of Cumulus Linux. Enabling front panel ports requires a license.</p>

<p>You receive a license key from Cumulus Networks or an authorized reseller. Here is a sample license key:</p>

<pre><code>user@company.com|thequickbrownfoxjumpsoverthelazydog312
</code></pre>

<p>There are three ways to install the license onto the switch:</p>

<ul>
<li>Copy the license from a local server. Create a text file with the license and copy it to a server accessible from the switch. On the switch, use the following command to transfer the file directly on the switch, then install the license file:
<code>
cumulus@switch:~$ scp user@my_server:/home/user/my_license_file.txt .
cumulus@switch:~$ sudo cl-license -i my_license_file.txt
</code></li>
<li>Copy the file to an HTTP server (not HTTPS), then reference the URL when you run <code>cl-license</code>:
<code>
cumulus@switch:~$ sudo cl-license -i &lt;URL&gt;
</code></li>
<li>Copy and paste the license key into the  <code>cl-license</code> command:
<code>
cumulus@switch:~$ sudo cl-license -i
&lt;paste license key&gt;
^+d
</code></li>
</ul>

<table style="width: 1197px;" border="0">
<tbody>
<tr>
<td style="width: 192px;"><strong>Release Note ID</strong></td>
<td style="width: 167.8125px;"><strong>Summary</strong></td>
<td style="width: 622.1875px;"><strong>Description</strong></td>
</tr>
<tr>
<td style="white-space: nowrap; width: 192px;"><a name="RN1130"></a><a href="#RN1130"> <img src="https://theme.zdassets.com/theme_assets/257925/59be21c5912389f67290d58a9cf0a6e745b50226.svg" alt="" width="32" /> </a> <br />RN-1130 (CM-22618)</td>
<td style="font-size: small; width: 167.8125px;">On Cumulus RMP, multiple failed ACL installations result in an `out of table resource` message even after reverting to a good rule set</td>
<td style="font-size: small; width: 622.1875px;">
<p>After attempting to install unsupported ICMPv6-type rules, the hardware sync fails with an <code>Out of table resource</code> message even after you correct the rules.</p>
<p>This is a known issue that is currently being investigated.</p>
</td>
</tr>
<tr>
<td style="white-space: nowrap; width: 192px;"><a name="RN1133"></a><a href="#RN1133"> <img src="https://theme.zdassets.com/theme_assets/257925/59be21c5912389f67290d58a9cf0a6e745b50226.svg" alt="" width="32" /> </a> <br />RN-1133 (CM-22590)</td>
<td style="font-size: small; width: 167.8125px;">NCLU `net show configuration commands` does not show output for an IPv6 rsyslog host</td>
<td style="font-size: small; width: 622.1875px;">
<p>NCLU <code>net show configuration commands</code> does not display any output for IPv6 rsyslog hosts.</p>
<p>This is a known issue that is currently being investigated.</p>
</td>
</tr>
<tr>
<td style="white-space: nowrap; width: 192px;"><a name="RN1134"></a><a href="#RN1134"> <img src="https://theme.zdassets.com/theme_assets/257925/59be21c5912389f67290d58a9cf0a6e745b50226.svg" alt="" width="32" /> </a> <br />RN-1134 (CM-22589)</td>
<td style="font-size: small; width: 167.8125px;">NCLU `net show configuration commands` displays a syslog command with invalid syntax</td>
<td style="font-size: small; width: 622.1875px;">
<p>NCLU <code>net show configuration commands</code> displays a <code>net add syslog</code> command with invalid syntax. For example, if you run the following commands:</p>
<pre>cumulus@switch:~$ net add syslog host ipv4 10.0.0.1 port udp 514
cumulus@switch:~$ net commit
</pre>
<p>then run <code>net show configuration commands</code>, the output of the command syntax is invalid.</p>
<p>This is a known issue that is currently being investigated.</p>
</td>
</tr>
<tr>
<td style="white-space: nowrap; width: 192px;"><a name="RN1136"></a><a href="#RN1136"> <img src="https://theme.zdassets.com/theme_assets/257925/59be21c5912389f67290d58a9cf0a6e745b50226.svg" alt="" width="32" /> </a> <br />RN-1136 (CM-22554)</td>
<td style="font-size: small; width: 167.8125px;">The link state of a bond is not updated when several members are brought down remotely at once</td>
<td style="font-size: small; width: 622.1875px;">
<p>If you try to bring down several members of a bond remotely at the same time, the link state of one of the interfaces does not correctly transition to the down state; however, all links show down in hardware.</p>
<p>This is a known issue that is currently being investigated.</p>
</td>
</tr>
</tbody>
</table>

<div class="notices note" ><p>It is not necessary to reboot the switch to activate the switch ports. After you install the license, restart the <code>switchd</code> service. All front panel ports become active and show up as swp1, swp2, and so on.</p>

<p>If a license is not installed on a Cumulus Linux switch, the <code>switchd</code> service does not start. After you install the license, start <code>switchd</code> as described above.</p>
</div>




	
		<div class="panel panel-default">
			<div class="panel-heading">Restart switchd</div>
			<div class="panel-body">
				<pre><code>cumulus@switch:~$ sudo systemctl restart switchd.service
</code></pre>

			</div>
		</div>
	




<h2 id="configuring-breakout-ports-with-splitter-cables">Configuring Breakout Ports with Splitter Cables</h2>

<p>If you are using 4x10G DAC or AOC cables, or want to break out 100G or 40G switch ports, configure the breakout ports. For more details, see <a href="https://docs.cumulusnetworks.com/display/DOCS/Switch+Port+Attributes#SwitchPortAttributes-breakout">Layer 1 and Switch Port Attributes</a>.</p>

<h2 id="testing-cable-connectivity">Testing Cable Connectivity</h2>

<p>By default, all data plane ports (every Ethernet port except the management interface, eth0) are disabled.</p>

<p>To test cable connectivity, administratively enable a port:</p>

<pre><code>cumulus@switch:~$ net add interface swp1
cumulus@switch:~$ net pending
cumulus@switch:~$ net commit
</code></pre>

<p>To administratively enable all physical ports, run the following command, where swp1-52 represents a switch with switch ports numbered from swp1 to swp52:</p>

<pre><code>cumulus@switch:~$ net add interface swp1-52
cumulus@switch:~$ net pending
cumulus@switch:~$ net commit
</code></pre>

<p>To view link status, use the <code>net show interface all</code> command. The following examples show the output of ports in <code>admin down</code>, <code>down</code>, and <code>up</code> modes:</p>

<pre><code>cumulus@switch:~$ net show interface all
       Name                      Speed    MTU    Mode           Summary
-----  ------------------------  -------  -----  -------------  --------------------------------------
UP     lo                        N/A      65536  Loopback       IP: 10.0.0.11/32, 127.0.0.1/8, ::1/128
UP     eth0                      1G       1500   Mgmt           IP: 192.168.0.11/24(DHCP)
UP     swp1 (hypervisor_port_1)  1G       1500   Access/L2      Untagged: br0
UP     swp2                      1G       1500   NotConfigured
ADMDN  swp45                     0M       1500   NotConfigured
ADMDN  swp46                     0M       1500   NotConfigured
ADMDN  swp47                     0M       1500   NotConfigured
ADMDN  swp48                     0M       1500   NotConfigured
ADMDN  swp49                     0M       1500   NotConfigured
ADMDN  swp50                     0M       1500   NotConfigured
UP     swp51                     1G       1500   BondMember     Master: bond0(DN)
UP     blue                      N/A      65536  NotConfigured
DN     bond0                     N/A      1500   Bond           Bond Members: swp51(UN)
UP     br0                       N/A      1500   Bridge/L3      IP: 172.16.1.1/24
                                                                Untagged Members: swp1
                                                                802.1q Tag: Untagged
                                                                STP: RootSwitch(32768)
UP     red                       N/A      65536  NotConfigured
ADMDN  rename13                  0M       1500   NotConfigured
ADMDN  vagrant                   0M       1500   NotConfigured
</code></pre>

<h2 id="configuring-switch-ports">Configuring Switch Ports</h2>

<h3 id="layer-2-port-configuration">Layer 2 Port Configuration</h3>

<p>Cumulus Linux does not put all ports into a bridge by default. To create a bridge and configure one or more front panel ports as members of the bridge, use the following examples as guides.</p>

<h4 id="examples">Examples</h4>

<div class="panel panel-info">
	<div class="panel-heading">Example One</div>
	<div class="panel-body"><p>In the following configuration example, the front panel port swp1 is placed into a bridge called <em>bridge</em>. The NCLU commands are:</p>

<pre><code>cumulus@switch:~$ net add bridge bridge ports swp1
cumulus@switch:~$ net pending
cumulus@switch:~$ net commit
</code></pre>

<p>The commands above produce the following <code>/etc/network/interfaces</code> snippet:</p>

<pre><code>auto bridge
iface bridge
   bridge-ports swp1
   bridge-vlan-aware yes
</code></pre>
</div>
	
</div>


<div class="panel panel-info">
	<div class="panel-heading">Example Two</div>
	<div class="panel-body"><p>You can add a range of ports in one command. For example, add swp1 through swp10, swp12, and swp14 through swp20 to bridge:</p>

<pre><code>cumulus@switch:~$ net add bridge bridge ports swp1-10,12,14-20
cumulus@switch:~$ net pending
cumulus@switch:~$ net commit
</code></pre>

<p>The commands above produce the following snippet in the <code>/etc/network/interfaces</code> file:</p>

<pre><code>auto bridge
iface bridge
    bridge-ports swp1 swp2 swp3 swp4 swp5 swp6 swp7 swp8 swp9 swp10 swp12 swp14 swp15 swp16 swp17 swp18 swp19 swp20
    bridge-vlan-aware yes
</code></pre>
</div>
	
</div>


<p>To view the changes in the kernel, use the  <code>brctl</code> command:</p>

<pre><code>cumulus@switch:~$ brctl show
bridge name     bridge id              STP enabled     interfaces
bridge          8000.443839000004      yes             swp1
                                                       swp2
</code></pre>

<h3 id="layer-3-port-configuration">Layer 3 Port Configuration</h3>

<p>You can also use NCLU to configure a front panel port or bridge interface as a layer 3 port.</p>

<p>In the following configuration example, the front panel port swp1 is configured as a layer 3 access port:</p>

<pre><code>cumulus@switch:~$ net add interface swp1 ip address 10.1.1.1/30
cumulus@switch:~$ net pending
cumulus@switch:~$ net commit
</code></pre>

<p>The commands above produce the following snippet in the <code>/etc/network/interfaces</code> file:</p>

<pre><code>auto swp1
iface swp1
    address 10.1.1.1/30
</code></pre>

<p>To add an IP address to a bridge interface, you must put it into a VLAN interface:</p>

<pre><code>cumulus@switch:~$ net add vlan 100 ip address 10.2.2.1/24
cumulus@switch:~$ net pending
cumulus@switch:~$ net commit
</code></pre>

<p>The commands above produce the following snippet in the <code>/etc/network/interfaces</code> file:</p>

<pre><code>auto bridge
iface bridge
    bridge-vids 100
    bridge-vlan-aware yes
    
auto vlan100
iface vlan100
    address 192.168.10.1/24
    vlan-id 100
    vlan-raw-device bridge
</code></pre>

<p>To view the changes in the kernel, use the <code>ip addr show</code> command:</p>

<pre><code>cumulus@switch:~$ ip addr show
...

4. swp1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast master bridge state UP group default qlen 1000
   link/ether 44:38:39:00:6e:fe brd ff:ff:ff:ff:ff:ff

...

14: bridge: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default
    link/ether 44:38:39:00:00:04 brd ff:ff:ff:ff:ff:ff
    inet6 fe80::4638:39ff:fe00:4/64 scope link 
      valid_lft forever preferred_lft forever    
...

</code></pre>

<h2 id="configuring-a-loopback-interface">Configuring a Loopback Interface</h2>

<p>Cumulus Linux has a loopback preconfigured in the <code>/etc/network/interfaces</code> file. When the switch boots up, it has a loopback interface, called <em>lo</em>, which is up and assigned an IP address of 127.0.0.1.</p>

<div class="notices tip" ><p>The loopback interface <em>lo</em> must always be specified in the <code>/etc/network/interfaces</code> file and must always be up.</p>
</div>


<p>To see the status of the loopback interface (lo), use the <code>net show interface lo</code> command:</p>

<pre><code>cumulus@switch:~$ net show interface lo
    Name    MAC                Speed      MTU  Mode
--  ------  -----------------  -------  -----  --------
UP  lo      00:00:00:00:00:00  N/A      65536  Loopback

IP Details
-------------------------  --------------------
IP:                        127.0.0.1/8, ::1/128
IP Neighbor(ARP) Entries:  0
</code></pre>

<p>Note that the loopback is up and is assigned an IP address of 127.0.0.1.</p>

<p>To add an IP address to a loopback interface, configure the <em>lo</em> interface with NCLU:</p>

<pre><code>cumulus@switch:~$ net add loopback lo ip address 10.1.1.1/32
cumulus@switch:~$ net pending
cumulus@switch:~$ net commit
</code></pre>

<p>You can configure multiple loopback addresses by adding additional <code>address</code> lines:</p>

<pre><code>cumulus@switch:~$ net add loopback lo ip address 172.16.2.1/24
cumulus@switch:~$ net pending
cumulus@switch:~$ net commit
</code></pre>

<p>The commands above produce the following snippet in the <code>/etc/network/interfaces</code> file:</p>

<pre><code>auto lo
iface lo inet loopback
    address 10.1.1.1/32
    address 172.16.2.1/24
</code></pre>



    
    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-prev" href="/cumulus-linux/" title="Cumulus Linux"> <i class="fa fa-chevron-left"></i><label>Cumulus Linux</label></a>
    <a class="nav nav-next" href="/cumulus-linux/system-configuration/" title="System Configuration" style="margin-right: 0px;"><label>System Configuration</label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

    
    <div class="date">
        <i class='fa fa-calendar'></i> Last update on 08/11/2018
    </div>
    

    
  </div>


	<div>


  
    <hr />

<p><a href="//CumulusNetworks.com/"><img src="https://cumulusnetworks.com/static/images/shared/cumulus-networks-logo-gray-dark.svg" width="200"></a></p>

<p>© <script type="text/javascript">document.write(new Date().getFullYear());</script> Cumulus Networks.<br>Bringing web-scale networking to the enterprise cloud.</p>

<table>
<thead>
<tr>
<th>Products</th>
<th>Learn</th>
<th>About</th>
</tr>
</thead>

<tbody>
<tr>
<td><a href="https://cumulusnetworks.com/products/cumulus-linux/">Cumulus Linux</a><br /><a href="https://cumulusnetworks.com/products/netq/">NetQ</a><br /><a href="https://cumulusnetworks.com/products/host-pack">Host Pack</a><br /><a href="https://cumulusnetworks.com/products/cumulus-express">Cumulus Express</a> <br />&nbsp;</td>
<td><a href="https://cumulusnetworks.com/learn/web-scale-networking-education/">Going web-scale</a><br /><a href="https://cumulusnetworks.com/learn/events/">Events</a><br /> <a href="https://cumulusnetworks.com/blog/">Blog</a><br />&nbsp;<br />&nbsp;</td>
<td><a href="https://cumulusnetworks.com/about/">Our story</a><br /><a href="https://cumulusnetworks.com/about/careers/">Careers</a><br /><a href="https://cumulusnetworks.com/about/media-coverage/">Media coverage</a><br /><a href="http://docs.cumulusnetworks.com/">Tech docs</a><br /><a href="https://cumulusnetworks.com/community/">Community</a></td>
</tr>
</tbody>
</table>

<p><a href="//twitter.com/CumulusNetworks/"><img src="https://cumulusnetworks.com/static/images/icons/hexagon-twitter.png" width="32"></a> ・ <a href="//www.facebook.com/CumulusNetworks/"><img src="https://cumulusnetworks.com/static/images/icons/hexagon-facebook.png" width="32"></a> ・ <a href="//linkedin.com/company/cumulus-networks/"><img src="https://cumulusnetworks.com/static/images/icons/hexagon-linkedin.png" width="32"></a> ・ <a href="//vimeo.com/CumulusNetworks/"><img src="https://cumulusnetworks.com/static/images/icons/hexagon-vimeo.png" width="32"></a> ・ <a href="//www.github.com/cumulusnetworks/"><img src="https://cumulusnetworks.com/static/images/icons/hexagon-git.png" width="32"></a> ・ <a href="//slack.cumulusnetworks.com/"><img src="https://cumulusnetworks.com/static/images/icons/hexagon-slack.png" width="32"></a></p>

<hr />

<p><a href="https://cumulusnetworks.com/legal/trademarks/">Trademarks</a> ・ <a href="https://cumulusnetworks.com/legal/privacy/">Privacy</a> ・ <a href="https://cumulusnetworks.com/legal/">Terms of service</a></p>

  



	</div>
</footer>

<script src="/js/clipboard.min.js"></script>

<link href="/css/featherlight.min.css" rel="stylesheet">
<script src="/js/featherlight.min.js"></script>



<script src="/theme-flex/script.js"></script>


    

    
    

    
  </body>
</html>